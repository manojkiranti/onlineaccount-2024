import{j as r,S as Oe,C as ge,u as $e,a as Ve,b as Me,c as T,r as g,I as Ie,F as z,B as O,s as B,d as D,e as Ue,f as k,g as G,h as S,i as ee,k as $,l as ze,m as W,o as H,n as K,R as I,p as u,q as E,t as Be,L as re,v as fe,w as De,x as he,y as ye,z as _,T as A,G as pe,D as xe,A as je,E as Ge,H as We,J as He,K as Ke,M as Qe,N as Ye,O as Ze,P as oe,Q as Je,U as q,V as Xe,W as er,X as rr,Y as tr,Z as R}from"./index-DazLNJNH.js";import{M as we}from"./index-c6xWnldR.js";import"./fade-DarzB2-Z.js";const sr={padding:50,background:"rgba(0, 0, 0, 0.05)",borderRadius:4},nr=r.jsx("div",{style:sr}),te=({isLoading:e})=>e?r.jsx("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,zIndex:99,display:"flex",justifyContent:"center",background:"rgba(255,255,255,0.7)"},children:r.jsx(Oe,{tip:"Loading",size:"large",children:nr})}):null,ie=({children:e})=>r.jsx("div",{className:"auth-layout",style:{padding:"1rem"},children:r.jsx(ge,{children:e})}),ar=({label:e})=>r.jsx("div",{className:"form-label-wrap",children:r.jsx("label",{style:{fontWeight:500,display:"inline-block",marginBottom:"5px"},children:e})}),be="%[a-f0-9]{2}",le=new RegExp("("+be+")|([^%]+?)","gi"),ce=new RegExp("("+be+")+","gi");function J(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;const s=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],J(s),J(n))}function or(e){try{return decodeURIComponent(e)}catch{let t=e.match(le)||[];for(let s=1;s<t.length;s++)e=J(t,s).join(""),t=e.match(le)||[];return e}}function ir(e){const t={"%FE%FF":"��","%FF%FE":"��"};let s=ce.exec(e);for(;s;){try{t[s[0]]=decodeURIComponent(s[0])}catch{const a=or(s[0]);a!==s[0]&&(t[s[0]]=a)}s=ce.exec(e)}t["%C2"]="�";const n=Object.keys(t);for(const a of n)e=e.replace(new RegExp(a,"g"),t[a]);return e}function lr(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return ir(e)}}function cr(e,t){const s={};if(Array.isArray(t))for(const n of t){const a=Object.getOwnPropertyDescriptor(e,n);a?.enumerable&&Object.defineProperty(s,n,a)}else for(const n of Reflect.ownKeys(e)){const a=Object.getOwnPropertyDescriptor(e,n);if(a.enumerable){const i=e[n];t(n,i,e)&&Object.defineProperty(s,n,a)}}return s}function Se(e,t){if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||t==="")return[];const s=e.indexOf(t);return s===-1?[]:[e.slice(0,s),e.slice(s+t.length)]}const dr=e=>e==null,ur=e=>encodeURIComponent(e).replaceAll(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),X=Symbol("encodeFragmentIdentifier");function mr(e){switch(e.arrayFormat){case"index":return t=>(s,n)=>{const a=s.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?s:n===null?[...s,[d(t,e),"[",a,"]"].join("")]:[...s,[d(t,e),"[",d(a,e),"]=",d(n,e)].join("")]};case"bracket":return t=>(s,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?s:n===null?[...s,[d(t,e),"[]"].join("")]:[...s,[d(t,e),"[]=",d(n,e)].join("")];case"colon-list-separator":return t=>(s,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?s:n===null?[...s,[d(t,e),":list="].join("")]:[...s,[d(t,e),":list=",d(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t=e.arrayFormat==="bracket-separator"?"[]=":"=";return s=>(n,a)=>a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?n:(a=a===null?"":a,n.length===0?[[d(s,e),t,d(a,e)].join("")]:[[n,d(a,e)].join(e.arrayFormatSeparator)])}default:return t=>(s,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?s:n===null?[...s,d(t,e)]:[...s,[d(t,e),"=",d(n,e)].join("")]}}function gr(e){let t;switch(e.arrayFormat){case"index":return(s,n,a)=>{if(t=/\[(\d*)]$/.exec(s),s=s.replace(/\[\d*]$/,""),!t){a[s]=n;return}a[s]===void 0&&(a[s]={}),a[s][t[1]]=n};case"bracket":return(s,n,a)=>{if(t=/(\[])$/.exec(s),s=s.replace(/\[]$/,""),!t){a[s]=n;return}if(a[s]===void 0){a[s]=[n];return}a[s]=[...a[s],n]};case"colon-list-separator":return(s,n,a)=>{if(t=/(:list)$/.exec(s),s=s.replace(/:list$/,""),!t){a[s]=n;return}if(a[s]===void 0){a[s]=[n];return}a[s]=[...a[s],n]};case"comma":case"separator":return(s,n,a)=>{const i=typeof n=="string"&&n.includes(e.arrayFormatSeparator),o=typeof n=="string"&&!i&&P(n,e).includes(e.arrayFormatSeparator);n=o?P(n,e):n;const l=i||o?n.split(e.arrayFormatSeparator).map(c=>P(c,e)):n===null?n:P(n,e);a[s]=l};case"bracket-separator":return(s,n,a)=>{const i=/(\[])$/.test(s);if(s=s.replace(/\[]$/,""),!i){a[s]=n&&P(n,e);return}const o=n===null?[]:n.split(e.arrayFormatSeparator).map(l=>P(l,e));if(a[s]===void 0){a[s]=o;return}a[s]=[...a[s],...o]};default:return(s,n,a)=>{if(a[s]===void 0){a[s]=n;return}a[s]=[...[a[s]].flat(),n]}}}function ke(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(e,t){return t.encode?t.strict?ur(e):encodeURIComponent(e):e}function P(e,t){return t.decode?lr(e):e}function Ce(e){return Array.isArray(e)?e.sort():typeof e=="object"?Ce(Object.keys(e)).sort((t,s)=>Number(t)-Number(s)).map(t=>e[t]):e}function Fe(e){const t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function fr(e){let t="";const s=e.indexOf("#");return s!==-1&&(t=e.slice(s)),t}function de(e,t,s){return s==="string"&&typeof e=="string"?e:typeof s=="function"&&typeof e=="string"?s(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")?e.toLowerCase()==="true":s==="number"&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""||t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?Number(e):e}function se(e){e=Fe(e);const t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function ne(e,t){t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,types:Object.create(null),...t},ke(t.arrayFormatSeparator);const s=gr(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(const a of e.split("&")){if(a==="")continue;const i=t.decode?a.replaceAll("+"," "):a;let[o,l]=Se(i,"=");o===void 0&&(o=i),l=l===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?l:P(l,t),s(P(o,t),l,n)}for(const[a,i]of Object.entries(n))if(typeof i=="object"&&i!==null&&t.types[a]!=="string")for(const[o,l]of Object.entries(i)){const c=t.types[a]?t.types[a].replace("[]",""):void 0;i[o]=de(l,t,c)}else typeof i=="object"&&i!==null&&t.types[a]==="string"?n[a]=Object.values(i).join(t.arrayFormatSeparator):n[a]=de(i,t,t.types[a]);return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((a,i)=>{const o=n[i];return a[i]=o&&typeof o=="object"&&!Array.isArray(o)?Ce(o):o,a},Object.create(null))}function Ee(e,t){if(!e)return"";t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t},ke(t.arrayFormatSeparator);const s=o=>t.skipNull&&dr(e[o])||t.skipEmptyString&&e[o]==="",n=mr(t),a={};for(const[o,l]of Object.entries(e))s(o)||(a[o]=l);const i=Object.keys(a);return t.sort!==!1&&i.sort(t.sort),i.map(o=>{const l=e[o];return l===void 0?"":l===null?d(o,t):Array.isArray(l)?l.length===0&&t.arrayFormat==="bracket-separator"?d(o,t)+"[]":l.reduce(n(o),[]).join("&"):d(o,t)+"="+d(l,t)}).filter(o=>o.length>0).join("&")}function Pe(e,t){t={decode:!0,...t};let[s,n]=Se(e,"#");return s===void 0&&(s=e),{url:s?.split("?")?.[0]??"",query:ne(se(e),t),...t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:P(n,t)}:{}}}function Le(e,t){t={encode:!0,strict:!0,[X]:!0,...t};const s=Fe(e.url).split("?")[0]||"",n=se(e.url),a={...ne(n,{sort:!1}),...e.query};let i=Ee(a,t);i&&=`?${i}`;let o=fr(e.url);if(typeof e.fragmentIdentifier=="string"){const l=new URL(s);l.hash=e.fragmentIdentifier,o=t[X]?l.hash:`#${e.fragmentIdentifier}`}return`${s}${i}${o}`}function Te(e,t,s){s={parseFragmentIdentifier:!0,[X]:!1,...s};const{url:n,query:a,fragmentIdentifier:i}=Pe(e,s);return Le({url:n,query:cr(a,t),fragmentIdentifier:i},s)}function hr(e,t,s){const n=Array.isArray(t)?a=>!t.includes(a):(a,i)=>!t(a,i);return Te(e,n,s)}const U=Object.freeze(Object.defineProperty({__proto__:null,exclude:hr,extract:se,parse:ne,parseUrl:Pe,pick:Te,stringify:Ee,stringifyUrl:Le},Symbol.toStringTag,{value:"Module"})),_e=({handeVerifySuccess:e})=>{const[t,{isLoading:s}]=$e(),n=Ve(c=>c.auth),a=Me();T();const[i,o]=g.useState("");g.useEffect(()=>{o("")},[]);const l=()=>{t({code:Number(i),temp_token:n.tempToken}).unwrap().then(c=>{a(B({token:c.access_token,refreshToken:c.refresh_token})),a(D({email:c.email,name:c.fullname,isAdmin:c.is_admin,is2FAEnabled:c.is_2fa_enabled})),a(Ue()),e()}).catch(c=>{k(c)})};return r.jsx(r.Fragment,{children:r.jsxs("div",{style:{padding:"1rem"},children:[r.jsx(Ie.OTP,{id:"code",value:i,onChange:c=>o(c),length:6,size:"large"}),r.jsx(z,{justify:"flex-end",style:{marginTop:"2rem"},children:r.jsx(O,{onClick:l,disabled:i.length<6,type:"primary",size:"large",loading:s,children:"Verify now"})})]})})},yr=G().shape({username:S().required("username is required"),password:S().required("Password is required")}),pr=()=>{const e=ee(),t=T(),s=$();g.useState(null);const[n,a]=g.useState(!1),i=s.state?.from?.pathname||"/dashboard",[o,{isLoading:l}]=ze(),{control:c,handleSubmit:C,formState:{errors:j}}=W({resolver:H(yr),defaultValues:{username:"",password:""}}),h=async y=>{try{const f=await o(y).unwrap();f?.data.two_factor_required?(e(fe({tempToken:f?.data.temp_token})),a(!0)):(e(B({token:f.data.access_token,refreshToken:f.data.refresh_token})),e(D({email:f.data.email,name:f.data.name})),t(i,{replace:!0}))}catch(f){k(f)}},w=y=>{console.log(`checked = ${y.target.checked}`)},m=()=>{a(!1)},b=()=>{t(i,{replace:!0})};return r.jsxs(r.Fragment,{children:[r.jsx(K,{children:r.jsx("form",{onSubmit:C(h),children:r.jsxs(I,{gutter:12,children:[r.jsxs(u,{xs:24,md:24,children:[r.jsx(ue,{label:"Username"}),r.jsx(E,{size:"large",name:"username",control:c,error:j.username?.message??""})]}),r.jsxs(u,{xs:24,md:24,children:[r.jsx(ue,{label:"Password"}),r.jsx(E,{type:"password",size:"large",name:"password",control:c,error:j.password?.message??""})]}),r.jsx(u,{xs:24,md:24,children:r.jsxs(z,{style:{marginBottom:"1.5rem"},justify:"space-between",children:[r.jsx(Be,{onChange:w,style:{fontWeight:"500"},children:"Remember Me"}),r.jsx(re,{style:{fontWeight:500},to:"/auth/forget-password",children:"Forget Password?"})]})}),r.jsx(u,{xs:24,md:24,children:r.jsx(O,{type:"primary",loading:l,htmlType:"submit",size:"large",style:{width:"100%"},children:"Login"})})]})})}),r.jsx(we,{title:"Two-factor authentication (2FA) has been enabled for your account. Please enter the verification code to proceed",open:n,onCancel:m,footer:null,children:r.jsx(_e,{handeVerifySuccess:b})})]})},ue=({label:e})=>r.jsx("div",{className:"form-label-wrap",children:r.jsx("label",{style:{fontWeight:500,display:"inline-block",marginBottom:"5px"},children:e})}),xr="_containerStyles_ttvu6_1",jr="_loginTitleContainerStyles_ttvu6_10",wr="_backgroundContainerStyles_ttvu6_16",br="_backgroundImageStyles_ttvu6_24",Sr="_overlayStyles_ttvu6_30",kr="_contentContainerStyles_ttvu6_39",Cr="_formContainerStyles_ttvu6_45",Fr="_googleButtonContainerStyles_ttvu6_58",Er="_loginContainerStyles_ttvu6_62",Pr="_regsiterLink_ttvu6_68",M={containerStyles:xr,loginTitleContainerStyles:jr,backgroundContainerStyles:wr,backgroundImageStyles:br,overlayStyles:Sr,contentContainerStyles:kr,formContainerStyles:Cr,googleButtonContainerStyles:Fr,loginContainerStyles:Er,regsiterLink:Pr},Q=({children:e,banner:t})=>r.jsx("div",{children:r.jsx(ge,{fullWidth:!0,style:{padding:"0"},children:r.jsxs(I,{children:[r.jsxs(u,{xs:24,md:12,children:[r.jsx("div",{style:{padding:"2rem"},children:r.jsx("img",{src:De,alt:"Bank Genie",style:{height:"40px"}})}),r.jsx("div",{className:M.formContainerStyles,children:e})]}),r.jsx(u,{xs:0,md:12,children:t})]})})}),Ae="/static/auth-page-backgound-min-Dup0Y_rg.jpeg",ae=()=>r.jsx(r.Fragment,{children:r.jsx("div",{style:{backgroundImage:`url(${Ae})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",height:"100%",position:"relative"},children:r.jsx("div",{style:{position:"absolute",left:"0",height:"100%",width:"100%",top:"0",backgroundColor:"rgba(0,0,0,0.3)"}})})}),Lr=()=>{const e=ee(),t=T(),s=$(),n=s.search,a=g.useRef(!1),[i,o]=g.useState(!1),l=s.state?.from?.pathname||"/dashboard",{data:c,isLoading:C,isError:j}=he(),[h,{isSuccess:w,isLoading:m}]=ye();g.useEffect(()=>{if(a.current)return;a.current=!0;const V=U.parse(s.search),F=V.code;V&&V.code&&!w&&(typeof F=="string"?h({code:F}).unwrap().then(p=>{p?.data.two_factor_required?(e(fe({tempToken:p?.data.temp_token})),o(!0)):(e(B({token:p.data.access_token,refreshToken:p.data.refresh_token})),e(D({email:p.data.email,name:p.data.name})),p.data.message&&_(p.data.message),t(l,{replace:!0}))}).catch(p=>{k(p)}):console.error("Expected code to be a string, received:",typeof F))},[n]);const b=()=>{c&&window.location.replace(c)},y=()=>{o(!1)},f=()=>{t(l,{replace:!0})};return r.jsxs(r.Fragment,{children:[r.jsxs(Q,{banner:r.jsx(ae,{}),children:[r.jsxs("div",{children:[r.jsxs("div",{className:M.loginTitleContainerStyles,children:[r.jsx(A.Title,{level:2,style:{color:"#003862"},children:"Login"}),r.jsx(A.Paragraph,{style:{color:"#475569"},children:"Kindly fill in the information to continue."})]}),r.jsx("div",{className:M.googleButtonContainerStyles,children:r.jsx(pe,{handleButtonClick:b,isLoading:C,isError:j})}),r.jsx(xe,{style:{color:"grey"},children:"or"}),r.jsx(pr,{})]}),r.jsxs("div",{className:M.regsiterLink,children:["Don't have an account? ",r.jsx(re,{to:"/auth/register",children:"Create Account"})]})]}),r.jsx(te,{isLoading:C||m}),r.jsx(we,{title:"Two-factor authentication (2FA) has been enabled for your account. Please enter the verification code to proceed",open:i,onCancel:y,footer:null,children:r.jsx(_e,{handeVerifySuccess:f})})]})},Tr=()=>r.jsx(r.Fragment,{children:r.jsx("div",{style:{backgroundImage:`url(${Ae})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",height:"100%",position:"relative"},children:r.jsx("div",{style:{position:"absolute",left:"0",height:"100%",width:"100%",top:"0",backgroundColor:"rgba(0,0,0,0.3)"}})})}),_r=G().shape({fullname:S().required("Full Name is required"),email:S().email("Invalid email").required("Email is required"),phone:S().required("Phone is required"),password:S().required("Password is required").test("password-strength","Password does not meet requirements",e=>ve.every(t=>t.test(e||""))),confirmPassword:S().oneOf([je("password"),""],"Passwords must match").required("Repeat password is required"),countryCode:S().required("Country is required")}),ve=[{test:e=>e&&e.length>=8,message:"Minimum 8 characters"},{test:e=>/[A-Z]/.test(e),message:"At least one uppercase letter"},{test:e=>/[!@#$&*]/.test(e),message:"At least one special character (!@#$&*)"}],Ar=()=>{T();const[e,t]=Ge(),s=We(),[n,a]=g.useState(null),[i,o]=g.useState(!1),[l,{isLoading:c}]=He(),[C,{isLoading:j}]=Ke(),{data:h,isLoading:w}=Qe(),{control:m,watch:b,handleSubmit:y,setValue:f,getValues:V,formState:{errors:F}}=W({resolver:H(_r)}),p=b("password",""),Y=b("countryCode");g.useEffect(()=>{h&&f("countryCode",h.data.country)},[h]),g.useEffect(()=>{if(Y){const x=Ye(Y);a(x)}},[Y]);const Ne=x=>{const L={email:x.email,fullname:x.fullname,phone:`+${n?.phone[0]}${x.phone}`,password:x.password,country:x.countryCode};l({body:L,source:e.get("source")||""}).unwrap().then(v=>{_(v.data.message),o(!0)}).catch(v=>{k(v)})},qe=()=>{const x=V("email");C({email:x}).unwrap().then(L=>{_(L.data.message)}).catch(L=>{console.log(L),k(L)})};return r.jsxs(r.Fragment,{children:[r.jsx(K,{children:r.jsx("form",{onSubmit:y(Ne),children:r.jsxs(I,{gutter:30,children:[r.jsxs(u,{xs:24,md:12,children:[r.jsx(N,{label:"Full Name"}),r.jsx(E,{size:"large",name:"fullname",control:m,error:F.fullname?.message??""})]}),r.jsxs(u,{xs:24,md:12,children:[r.jsx(N,{label:"Email"}),r.jsx(E,{size:"large",name:"email",control:m,error:F.email?.message??""})]}),r.jsxs(u,{xs:24,md:12,children:[r.jsx(N,{label:"Country Of Residence"}),r.jsx(Ze,{showSearch:!0,options:s,name:"countryCode",disabled:w,control:m,size:"large",placeholder:"Select your country",error:F.countryCode?.message??"",required:!0})]}),r.jsxs(u,{xs:24,md:12,children:[r.jsx(N,{label:"Phone"}),r.jsx(E,{size:"large",prefix:n?`+ ${n.phone[0]}`:"",name:"phone",control:m,error:F.phone?.message??""})]}),r.jsxs(u,{xs:24,md:12,children:[r.jsx(N,{label:"Password"}),r.jsx(E,{size:"large",name:"password",type:"password",control:m,error:F.password?.message??""})]}),r.jsxs(u,{xs:24,md:12,children:[r.jsx(N,{label:"Confirm Password"}),r.jsx(E,{size:"large",type:"password",name:"confirmPassword",control:m,error:F.confirmPassword?.message??""})]}),r.jsx(u,{xs:24,md:24,children:r.jsx("ul",{style:{margin:"1rem 0",paddingLeft:"0",listStyle:"none"},children:ve.map((x,L)=>{const v=x.test(p);return r.jsxs("li",{style:{display:"flex",alignItems:"center",marginBottom:"8px",color:v?"green":"red",fontWeight:500},children:[r.jsx("span",{style:{display:"inline-block",marginRight:"10px"},children:v?"✅":"❌"}),x.message]},L)})})}),r.jsxs(u,{xs:24,md:24,children:[r.jsx(O,{type:"primary",htmlType:"submit",size:"large",style:{width:"100%"},loading:c,disabled:c,children:"Register"}),r.jsxs(z,{justify:"center",style:{marginTop:"1rem"},gap:10,children:[r.jsx(A,{children:"Already have an account? "})," ",r.jsx(re,{to:"/auth",children:"Login"})]})]})]})})}),i&&r.jsxs(z,{align:"center",justify:"center",children:[r.jsx(oe,{style:{margin:"0"},children:"Didn't receive the verification email? Check your spam folder or try resending it."}),r.jsx(O,{loading:j,disabled:j,type:"link",onClick:qe,children:"Resend"})]}),i&&r.jsx(oe,{type:"warning",style:{textAlign:"center"},children:"You can only resend the verification email once every minute."})]})},N=({label:e})=>r.jsx("div",{className:"form-label-wrap",children:r.jsx("label",{style:{fontWeight:500,display:"inline-block",marginBottom:"5px"},children:e})}),vr="_registerTitleContainerStyles_kzwz7_1",Z={registerTitleContainerStyles:vr},Rr=()=>{const e=ee(),t=T(),s=$(),n=s.search,a=g.useRef(!1),{data:i,isLoading:o,isError:l}=he(),[c,{isSuccess:C}]=ye();g.useEffect(()=>{if(a.current)return;a.current=!0;const h=U.parse(s.search),w=h.code;h&&h.code&&!C&&(typeof w=="string"?c({code:w}).unwrap().then(m=>{e(B({token:m.data.access_token,refreshToken:m.data.refresh_token})),e(D({email:m.data.email,name:m.data.name})),t("/dashboard")}).catch(m=>{k(m)}):console.error("Expected code to be a string, received:",typeof w))},[n]);const j=()=>{i&&window.location.replace(i)};return r.jsx(Q,{banner:r.jsx(Tr,{}),children:r.jsxs("div",{children:[r.jsxs("div",{className:Z.registerTitleContainerStyles,children:[r.jsx(A.Title,{level:2,style:{color:"#003862"},children:"Create an account"}),r.jsx(A.Paragraph,{style:{color:"#475569"},children:"Kindly fill in the information to continue."})]}),r.jsx("div",{className:Z.googleButtonContainerStyles,children:r.jsx(pe,{handleButtonClick:j,isLoading:o,isError:l})}),r.jsx("div",{className:Z.googleButtonContainerStyles}),r.jsx(xe,{style:{color:"grey"},children:"or"}),r.jsx(Ar,{})]})})},Nr=()=>{const e=$(),s=U.parse(e.search).token,n=T(),{data:a,isLoading:i,isError:o,error:l}=Je({token:s||""},{skip:!s});if(g.useEffect(()=>{o&&k(l),a&&(_(a?.data?.message),setTimeout(()=>{n(`/auth/password-setup?uid=${a.data.uid}&token=${a.data.password_reset_token}`)},1e3))},[o,l,n,a]),o){const c=l?.data?.error||"An unknown error occurred";return r.jsx(q,{message:"Error",description:c,type:"error"})}return i?r.jsx(r.Fragment,{children:r.jsx(te,{isLoading:i})}):s?a?r.jsx("div",{children:r.jsx(q,{message:"Congratulation",description:a?.data?.message??"Email verified",type:"success"})}):null:r.jsx(q,{message:"Error",description:"No Token Provided",type:"error"})},Re=[{test:e=>e&&e.length>=8,message:"Minimum 8 characters"},{test:e=>/[A-Z]/.test(e),message:"At least one uppercase letter"},{test:e=>/[!@#$&*]/.test(e),message:"At least one special character (!@#$&*)"}],qr=G().shape({password:S().required("Password is required").test("password-strength","Password does not meet requirements",e=>Re.every(t=>t.test(e||""))),repeatPassword:S().oneOf([je("password"),""],"Passwords must match").required("Repeat password is required")}),Or=()=>{const e=$(),t=U.parse(e.search),s=t.uid,n=t.token,a=T(),{control:i,handleSubmit:o,watch:l,formState:{errors:c,isValid:C}}=W({resolver:H(qr),mode:"onChange",defaultValues:{password:"",repeatPassword:""}}),j=l("password",""),[h,{isLoading:w}]=Xe(),m=b=>{s&&n?h({uid:s,token:n,new_password:b.password}).unwrap().then(y=>{_(y.data?.message),a("/auth")}).catch(y=>{k(y)}):k("Invalid URL")};return r.jsx(Q,{banner:r.jsx(ae,{}),children:r.jsx(K,{style:{marginTop:"1rem",width:"100%"},children:r.jsx("form",{onSubmit:o(m),children:r.jsxs(I,{gutter:12,children:[r.jsxs(u,{xs:24,md:24,children:[r.jsx(me,{label:"Password"}),r.jsx(E,{type:"password",size:"large",name:"password",control:i,error:c.password?.message??""})]}),r.jsxs(u,{xs:24,md:24,children:[r.jsx(me,{label:"Repeat Password"}),r.jsx(E,{type:"password",size:"large",name:"repeatPassword",control:i,error:c.repeatPassword?.message??""})]}),r.jsx(u,{xs:24,md:24,children:r.jsx("div",{style:{margin:"1rem 0"},children:Re.map((b,y)=>{const f=b.test(j);return r.jsx("div",{style:{color:f?"green":"red"},children:b.message},y)})})}),r.jsx(u,{xs:24,md:24,children:r.jsx(O,{type:"primary",htmlType:"submit",size:"large",disabled:!C,style:{width:"100%"},loading:w,children:"Set Password"})})]})})})})},me=({label:e})=>r.jsx("div",{className:"form-label-wrap",children:r.jsx("label",{style:{fontWeight:500,display:"inline-block",marginBottom:"5px"},children:e})}),$r=G().shape({email:S().email("Enter a valid email").required("username is required")}),Vr=()=>{const{control:e,handleSubmit:t,formState:{errors:s}}=W({resolver:H($r),defaultValues:{email:""}}),[n,{isLoading:a}]=er(),i=async o=>{console.log(o),n(o).unwrap().then(l=>{console.log("Forget Password Response",l),_(l.message)}).catch(l=>{k(l)})};return r.jsx(Q,{banner:r.jsx(ae,{}),children:r.jsxs("div",{className:M.loginTitleContainerStyles,children:[r.jsx(A.Title,{level:2,style:{color:"#003862"},children:"Forget Password"}),r.jsx(A.Paragraph,{style:{color:"#475569"},children:"Please enter your registered email address to receive a password reset link."}),r.jsx(K,{style:{width:"100%"},children:r.jsx("form",{onSubmit:t(i),children:r.jsxs(I,{gutter:12,children:[r.jsxs(u,{xs:24,md:24,children:[r.jsx(ar,{label:"Email"}),r.jsx(E,{size:"large",name:"email",control:e,error:s.email?.message??""})]}),r.jsx(u,{xs:24,md:24,children:r.jsx(O,{type:"primary",loading:a,htmlType:"submit",size:"large",style:{width:"100%"},children:"Submit"})})]})})})]})})},Mr=()=>{const e=$(),s=U.parse(e.search).token,n=T(),{data:a,isLoading:i,isError:o,error:l}=rr({token:s||""},{skip:!s});if(g.useEffect(()=>{console.log("verifyTokenError",l),o&&k(l),a&&(console.log("verifyTokenRes",a),_(a?.data?.message),setTimeout(()=>{n("/auth")},1e3))},[o,l,n,a]),o){const c=l?.data?.error||"An unknown error occurred";return r.jsx(q,{message:"Error",description:c,type:"error"})}return i?r.jsx(r.Fragment,{children:r.jsx(te,{isLoading:i})}):s?a?r.jsx("div",{children:r.jsx(q,{message:"Congratulation",description:a?.data?.message??"Email verified",type:"success"})}):null:r.jsx(q,{message:"Error",description:"No Token Provided",type:"error"})},Br=()=>r.jsx(r.Fragment,{children:r.jsxs(tr,{children:[r.jsx(R,{path:"",element:r.jsx(Lr,{})}),r.jsx(R,{path:"register",element:r.jsx(Rr,{})}),r.jsx(R,{path:"forget-password",element:r.jsx(Vr,{})}),r.jsx(R,{path:"verify-email",element:r.jsx(ie,{children:r.jsx(Nr,{})})}),r.jsx(R,{path:"verify-register-email",element:r.jsx(ie,{children:r.jsx(Mr,{})})}),r.jsx(R,{path:"password-setup",element:r.jsx(Or,{})})]})});export{Br as AuthRoutes};
//# sourceMappingURL=index-BZ93ZsJ_.js.map
